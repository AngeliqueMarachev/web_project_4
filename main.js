!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,i){let{title:o,link:n}=t;e(this,"_toggleLikeButton",(()=>{this._cardLikeButton.classList.toggle("gallery__heart-icon_clicked")})),e(this,"_deleteCard",(()=>{this._cardElement.remove(),this._cardElement=null})),e(this,"_addEventListeners",(()=>{this._cardLikeButton.addEventListener("click",(()=>this._toggleLikeButton())),this._deleteCardButton.addEventListener("click",(()=>this._deleteCard())),this._cardImage.addEventListener("click",(()=>this._handleCardClick(this._title,this._link)))})),e(this,"createCardElement",(()=>{const e=document.querySelector(this._cardTemplateSelector).content.querySelector(".gallery__card");return this._cardElement=e.cloneNode(!0),this._cardImage=this._cardElement.querySelector(".gallery__item"),this._cardTitle=this._cardElement.querySelector(".gallery__text"),this._cardLikeButton=this._cardElement.querySelector(".gallery__heart-icon"),this._deleteCardButton=this._cardElement.querySelector(".gallery__delete-button"),this._cardImage.src=this._link,this._cardImage.alt="".concat(this._title),this._cardTitle.textContent=this._title,this._addEventListeners(),this._cardElement})),this._title=o,this._link=n,this._cardTemplateSelector=s,this._handleCardClick=i}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e,t){s(this,"_showInputError",((e,t)=>{const{inputErrorClass:s,errorClass:i}=this._settings,o=this._formEl.querySelector("#".concat(e.id,"-error"));e.classList.add(i),o.classList.add(s),o.textContent=t})),s(this,"_hideInputError",(e=>{const{inputErrorClass:t,errorClass:s}=this._settings,i=this._formEl.querySelector("#".concat(e.id,"-error"));e.classList.remove(s),i.classList.remove(t),i.textContent=""})),s(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),s(this,"_toggleButton",(()=>{this._isFormValid()?this._enableButton():this.disableButton()})),s(this,"disableButton",(()=>{this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0})),s(this,"_enableButton",(()=>{this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1})),s(this,"_isFormValid",(()=>this._inputList.every((e=>e.validity.valid)))),s(this,"_setEventListeners",(()=>{this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))})),this._settings=e,this._formEl=t,this._inputList=Array.from(this._formEl.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formEl.querySelector(this._settings.submitButtonSelector)}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButton()}enableValidation(){this._formEl.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e){o(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),o(this,"_handleOverlayClose",(e=>{e.target.classList.contains("popup_open")&&this.close()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}setEventListeners(){this._popupElement.querySelector(".popup__close").addEventListener("mousedown",(()=>{this.close()}))}}class r extends n{constructor(e,t){super(e),this._form=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._inputs=Array.from(this._form.querySelectorAll(".popup__input"))}_getInputValues(){const e={};return this._inputs.forEach((t=>{const s=t.name,i=t.value;e[s]=i})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._form.reset(),super.close()}}const l={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},a=document.querySelector(".profile__edit-button"),c=document.querySelector(".popup__form-edit"),u=document.querySelector(".profile__add-button"),_=(document.querySelector(".profile__name"),document.querySelector(".profile__occupation"),c.querySelector(".popup__input_type_name")),p=c.querySelector(".popup__input_type_occupation"),d=(document.querySelector(".popup_type_profile"),document.querySelector(".popup__form-create")),h=(document.querySelector(".popup__close_profile"),document.querySelector(".gallery__grid"),document.querySelector(".popup_type_preview")),m=(h.querySelector(".popup__image"),h.querySelector(".popup__text"),new i(l,c));m.enableValidation(),m.disableButton();const y=new i(l,d);y.enableValidation(),y.disableButton();const E=new r(".popup_type_profile",(e=>{b.setUserInfo(e.name,e.occupation),E.close()}));E.setEventListeners();const g=new r(".popup_type_add-card",(e=>{f(e),y.resetValidation(),g.close()}));g.setEventListeners();const v=new class extends n{constructor(e){super(e),this._image=this._popupElement.querySelector(".popup__image"),this._imageCaption=this._popupElement.querySelector(".popup__text")}open(e,t){super.open(),this._image.src=t,this._image.alt=e,this._imageCaption.textContent=e}}(".popup_type_preview");v.setEventListeners();const f=e=>{const s=new t(e,"#gallery-template",((e,t)=>{v.open(e,t)}));L.addItem(s.createCardElement())},b=new class{constructor(e){let{userNameSelector:t,userOccupationSelector:s}=e;this._profileName=document.querySelector(t),this._profileOccupation=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,occupation:this._profileOccupation.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileOccupation.textContent=t}}({userNameSelector:".profile__name",userOccupationSelector:".profile__occupation"}),L=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>f(e)},".gallery__grid");L.renderItems(),a.addEventListener("click",(()=>{E.open();const e=b.getUserInfo();_.value=e.name,p.value=e.occupation})),u.addEventListener("click",(()=>{g.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qix5QkFLcEJKLEVBQVUsSUd2RUQsTUFDYmhILFlBQVksRUFBcUJ3SCxHQUFtQixJQUF4QyxNQUFFQyxFQUFGLFNBQVNDLEdBQStCLEVBQ2xEckgsS0FBS3NILE9BQVNGLEVBQ2RwSCxLQUFLdUgsVUFBWUYsRUFDakJySCxLQUFLd0gsV0FBYXpHLFNBQVNDLGNBQWNtRyxHQUczQ00sY0FDRXpILEtBQUtzSCxPQUFPcEUsU0FBU3dFLElBQ25CMUgsS0FBS3VILFVBQVVHLE1BSW5CZCxRQUFRYyxHQUNOMUgsS0FBS3dILFdBQVdHLFFBQVFELEtIMEQxQixDQUNFTixNRHpFd0IsQ0FDeEIsQ0FDRXRILE1BQU8sa0JBQ1BDLEtBQU0sb0RBRVIsQ0FDRUQsTUFBTyxjQUNQQyxLQUFNLHVEQUVSLENBQ0VELE1BQU8saUJBQ1BDLEtBQU0sMERBRVIsQ0FDRUQsTUFBTyxVQUNQQyxLQUFNLG1EQUVSLENBQ0VELE1BQU8sd0JBQ1BDLEtBQU0sbURBRVIsQ0FDRUQsTUFBTyxpQkFDUEMsS0FBTSxpRENtRFJzSCxTQUFXcEIsR0FBU0ssRUFBV0wsSUFFakMsa0JBRUZVLEVBQVFjLGNBSVJsQyxFQUF1QmpGLGlCQUFpQixTQUFTLEtBQy9DMEYsRUFBaUJ6QixPQUNqQixNQUFNcUQsRUFBTzFCLEVBQVNnQixjQUN0QnhCLEVBQVdMLE1BQVF1QyxFQUFLeEMsS0FDeEJPLEVBQWlCTixNQUFRdUMsRUFBS3hCLGNBR2hDWCxFQUFjbkYsaUJBQWlCLFNBQVMsS0FDdEMrRixFQUFnQjlCLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IHRpdGxlLCBsaW5rIH0sIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX3RvZ2dsZUxpa2VCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2hlYXJ0LWljb25fY2xpY2tlZFwiKTtcbiAgfTtcblxuICBfZGVsZXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgX2FkZEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZUJ1dHRvbigpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLl9kZWxldGVDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgIHRoaXMuX2RlbGV0ZUNhcmQoKVxuICAgICk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fdGl0bGUsIHRoaXMuX2xpbmspKTtcbiAgfTtcblxuICBjcmVhdGVDYXJkRWxlbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRcIik7XG4gICAgICBcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW1cIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X190ZXh0XCIpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmdhbGxlcnlfX2hlYXJ0LWljb25cIlxuICAgICk7XG4gICAgdGhpcy5fZGVsZXRlQ2FyZEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5nYWxsZXJ5X19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGAke3RoaXMuX3RpdGxlfWA7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG5cbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTsgIFxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWwsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWwpID0+IHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XG5cbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbCkgPT4ge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc0Zvcm1WYWxpZCgpKSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9O1xuXG4gIGRpc2FibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICBfZW5hYmxlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9O1xuXG4gIF9pc0Zvcm1WYWxpZCA9ICgpID0+IHtcbiAgICByZXR1cm4gIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG4gIFxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuXCIpKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgIG9wZW4oKSB7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIH1cbiAgXG4gICAgY2xvc2UoKSB7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIH1cblxuICBcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIGNvbnN0IHBvcHVwQ2xvc2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG4gICAgICBwb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gaW5wdXQubmFtZTtcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgICBpbnB1dFZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIHRpdGxlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJMYXRlbWFyXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gICAgfSxcbiAgXTtcbiAgXG4gIGV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbiAgfTtcblxuZXhwb3J0IGNvbnN0IG9wZW5Qcm9maWxlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWVkaXRcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlT2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fb2NjdXBhdGlvblwiKTtcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0ID0gZWRpdFByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGVkaXRQcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfb2NjdXBhdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tY3JlYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGNsb3NlUHJvZmlsZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VfcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19ncmlkXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjZ2FsbGVyeS10ZW1wbGF0ZVwiO1xuXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvciA9IFwicG9wdXBfb3BlblwiO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wcmV2aWV3XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBUaXRsZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190ZXh0XCIpO1xuXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuXG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHNldHRpbmdzLFxuICBvcGVuUHJvZmlsZU1vZGFsQnV0dG9uLFxuICBlZGl0UHJvZmlsZVBvcHVwLFxuICBhZGRDYXJkQnV0dG9uLFxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgYWRkQ2FyZFBvcHVwLFxuICB0aXRsZUlucHV0LFxuICBkZXNjcmlwdGlvbklucHV0LFxuXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gRm9ybSBWYWxpZGF0aW9uXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGVGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRQcm9maWxlUG9wdXApO1xudmFsaWRhdGVQcm9maWxlRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZVByb2ZpbGVGb3JtLmRpc2FibGVCdXR0b24oKTtcblxuY29uc3QgdmFsaWRhdGVQbGFjZUZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZFBvcHVwKTtcbnZhbGlkYXRlUGxhY2VGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlUGxhY2VGb3JtLmRpc2FibGVCdXR0b24oKTtcblxuXG4vLyBQb3B1cHNcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIiwgKGRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLm9jY3VwYXRpb24pO1xuICBwcm9maWxlUG9wdXBGb3JtLmNsb3NlKCk7XG59KTtcbnByb2ZpbGVQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5jb25zdCBwbGFjZXNQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIChkYXRhKSA9PiB7XG4gXG4gIHJlbmRlckNhcmQoZGF0YSk7XG4gIHZhbGlkYXRlUGxhY2VGb3JtLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwbGFjZXNQb3B1cEZvcm0uY2xvc2UoKTtcbiBcbn0pO1xucGxhY2VzUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9wcmV2aWV3XCIpO1xuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gQ3JlYXRlIENhcmRcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCAodGl0bGUsIGxpbmspID0+IHtcbiAgICBpbWFnZVByZXZpZXdQb3B1cC5vcGVuKHRpdGxlLCBsaW5rKTtcblxuICB9KTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LmNyZWF0ZUNhcmRFbGVtZW50KCkpO1xufTtcblxuXG4vLyBVc2VySW5mb1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIHVzZXJPY2N1cGF0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX29jY3VwYXRpb25cIixcbn0pO1xuXG5cbi8vIFBsYWNlcyBDb250YWluZXJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiByZW5kZXJDYXJkKGRhdGEpLFxuICB9LFxuICBcIi5nYWxsZXJ5X19ncmlkXCJcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5vcGVuUHJvZmlsZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVQb3B1cEZvcm0ub3BlbigpO1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgdGl0bGVJbnB1dC52YWx1ZSA9IGluZm8ubmFtZTtcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGluZm8ub2NjdXBhdGlvbjtcbn0pXG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcGxhY2VzUG9wdXBGb3JtLm9wZW4oKTtcbn0pOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190ZXh0XCIpO1xuICB9XG5cbiAgb3Blbih0aXRsZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgIFxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGl0bGU7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHVzZXJOYW1lU2VsZWN0b3IsXG4gICAgdXNlck9jY3VwYXRpb25TZWxlY3RvclxuICB9KSB7XG4gICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyT2NjdXBhdGlvblNlbGVjdG9yKTtcbiAgICB9XG4gIFxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICAgIG9jY3VwYXRpb246IHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50LFxuICAgICAgfTtcbiAgICB9XG4gIFxuICAgIHNldFVzZXJJbmZvKG5hbWUsIG9jY3VwYXRpb24pIHtcbiAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgIHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gb2NjdXBhdGlvbjtcbiAgICB9XG4gIH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aXRsZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUNhcmRCdXR0b24iLCJfZGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX3RpdGxlIiwiX2xpbmsiLCJjYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2V0dGluZ3MiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaXNGb3JtVmFsaWQiLCJfZW5hYmxlQnV0dG9uIiwiZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsIm9wZW5Qcm9maWxlTW9kYWxCdXR0b24iLCJlZGl0UHJvZmlsZVBvcHVwIiwiYWRkQ2FyZEJ1dHRvbiIsInRpdGxlSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiYWRkQ2FyZFBvcHVwIiwicHJldmlld01vZGFsIiwidmFsaWRhdGVQcm9maWxlRm9ybSIsInZhbGlkYXRlUGxhY2VGb3JtIiwicHJvZmlsZVBvcHVwRm9ybSIsImRhdGEiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwib2NjdXBhdGlvbiIsInBsYWNlc1BvcHVwRm9ybSIsInJlbmRlckNhcmQiLCJpbWFnZVByZXZpZXdQb3B1cCIsIl9pbWFnZSIsIl9pbWFnZUNhcHRpb24iLCJjYXJkRWxlbWVudCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlck9jY3VwYXRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlT2NjdXBhdGlvbiIsImdldFVzZXJJbmZvIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsInByZXBlbmQiLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==